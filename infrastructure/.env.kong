# Kong Gateway Environment Variables
# AgroLogistic 2.0 - Production Configuration

# ============================================================
# PostgreSQL Configuration
# ============================================================
KONG_PG_HOST=kong-database
KONG_PG_PORT=5432
KONG_PG_USER=kong
KONG_PG_DATABASE=kong
KONG_PG_PASSWORD=K0ng_S3cur3_P@ssw0rd_Ch@ng3_M3!

# ============================================================
# Kong Admin API
# ============================================================
KONG_ADMIN_LISTEN=0.0.0.0:8001
KONG_ADMIN_GUI_LISTEN=0.0.0.0:8002
KONG_ADMIN_GUI_URL=http://localhost:8002

# ============================================================
# JWT Configuration
# ============================================================
JWT_SECRET=AgR0L0g1st1c_JWT_S3cr3t_K3y_2024_Ch@ng3_Th1s!
JWT_ALGORITHM=HS256
JWT_EXP=3600

# JWT Secrets pour chaque consumer
JWT_WEB_SECRET=W3b_Cl13nt_S3cr3t_2024_Ch@ng3!
JWT_MOBILE_SECRET=M0b1l3_Cl13nt_S3cr3t_2024_Ch@ng3!
JWT_ADMIN_SECRET=Adm1n_Cl13nt_S3cr3t_2024_Ch@ng3!

# ============================================================
# Rate Limiting Configuration
# ============================================================
RATE_LIMIT_MINUTE_DEFAULT=1000
RATE_LIMIT_HOUR_DEFAULT=10000
RATE_LIMIT_MINUTE_AUTH=100
RATE_LIMIT_MINUTE_PAYMENT=50
RATE_LIMIT_MINUTE_AI=30

# ============================================================
# CORS Configuration
# ============================================================
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,https://agrologistic.app
CORS_CREDENTIALS=true
CORS_MAX_AGE=3600

# ============================================================
# Monitoring & Logging
# ============================================================
KONG_LOG_LEVEL=notice
KONG_PROXY_ACCESS_LOG=/dev/stdout
KONG_ADMIN_ACCESS_LOG=/dev/stdout
KONG_PROXY_ERROR_LOG=/dev/stderr
KONG_ADMIN_ERROR_LOG=/dev/stderr

# Prometheus
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=8100

# ============================================================
# Grafana (Optional)
# ============================================================
GRAFANA_USER=admin
GRAFANA_PASSWORD=Gr@f@n@_P@ss_Ch@ng3_M3!

# ============================================================
# Microservices Backend URLs
# ============================================================
AUTH_SERVICE_URL=http://auth-service:8001
PRODUCT_SERVICE_URL=http://product-service:8002
ORDER_SERVICE_URL=http://order-service:8003
LOGISTICS_SERVICE_URL=http://logistics-service:8004
PAYMENT_SERVICE_URL=http://payment-service:8005
NOTIFICATION_SERVICE_URL=http://notification-service:8006
ANALYTICS_SERVICE_URL=http://analytics-service:8007
AI_SERVICE_URL=http://ai-service:8008
BLOCKCHAIN_SERVICE_URL=http://blockchain-service:8009
INVENTORY_SERVICE_URL=http://inventory-service:8010
USER_SERVICE_URL=http://user-service:8011

# ============================================================
# Security
# ============================================================
# IP Whitelisting for admin routes (comma-separated)
ADMIN_IP_WHITELIST=127.0.0.1,::1,172.16.0.0/12,192.168.0.0/16

# Request size limits (in MB)
MAX_REQUEST_SIZE=10

# ============================================================
# Performance Tuning
# ============================================================
KONG_NGINX_WORKER_PROCESSES=auto
KONG_MEM_CACHE_SIZE=128m
KONG_UPSTREAM_KEEPALIVE=60
KONG_UPSTREAM_KEEPALIVE_TIMEOUT=60s

# ============================================================
# SSL/TLS (Production)
# ============================================================
# KONG_SSL_CERT=/path/to/cert.pem
# KONG_SSL_CERT_KEY=/path/to/key.pem
# KONG_PROXY_LISTEN=0.0.0.0:8000, 0.0.0.0:8443 ssl http2

# ============================================================
# Health Checks
# ============================================================
HEALTH_CHECK_INTERVAL=10
HEALTH_CHECK_TIMEOUT=5
HEALTH_CHECK_SUCCESSES=2
HEALTH_CHECK_FAILURES=3

# ============================================================
# Session Configuration
# ============================================================
SESSION_SECRET=S3ss10n_S3cr3t_K3y_Ch@ng3_Th1s!
SESSION_COOKIE_NAME=agrologistic_session
SESSION_COOKIE_LIFETIME=86400

# ============================================================
# Feature Flags
# ============================================================
ENABLE_CACHING=true
ENABLE_COMPRESSION=true
ENABLE_RATE_LIMITING=true
ENABLE_JWT_AUTH=true
ENABLE_PROMETHEUS=true
