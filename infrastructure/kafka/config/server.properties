# =============================================================================
# Kafka Broker - server.properties (Cahier des charges 1.2)
# Optimisé pour machine 8GB RAM - paramètres complémentaires aux variables d'env
# =============================================================================
# Note: Le docker-compose.kafka.yml définit déjà la plupart des options via
# variables d'environnement (KRaft, listeners, replication). Ce fichier
# ajoute des réglages JVM et log pour 8GB RAM.
# =============================================================================

# -----------------------------------------------------------------------------
# Log retention & segments (déjà partiellement en env)
# -----------------------------------------------------------------------------
log.retention.hours=168
log.segment.bytes=1073741824
log.retention.check.interval.ms=300000
log.cleaner.enable=true
log.cleaner.threads=2
log.cleaner.dedupe.buffer.size=134217728

# -----------------------------------------------------------------------------
# Réplication & disponibilité
# -----------------------------------------------------------------------------
num.replica.fetchers=2
replica.fetch.max.bytes=10485760
replica.lag.time.max.ms=30000
unclean.leader.election.enable=false
min.insync.replicas=2

# -----------------------------------------------------------------------------
# Réseau / threads (8GB RAM)
# -----------------------------------------------------------------------------
num.network.threads=6
num.io.threads=8
socket.send.buffer.bytes=102400
socket.receive.buffer.bytes=102400
socket.request.max.bytes=104857600

# -----------------------------------------------------------------------------
# Groupe de consommateurs
# -----------------------------------------------------------------------------
group.initial.rebalance.delay.ms=0
offsets.topic.replication.factor=3
transaction.state.log.replication.factor=3
transaction.state.log.min.isr=2

# -----------------------------------------------------------------------------
# Désactivation création auto de topics (gérés par init-topics)
# -----------------------------------------------------------------------------
auto.create.topics.enable=false

# -----------------------------------------------------------------------------
# Métriques (optionnel)
# -----------------------------------------------------------------------------
metric.reporters=
