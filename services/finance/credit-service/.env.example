# ============================================================================
# AgriCredit Service - Environment Configuration
# ============================================================================
# Copy this file to .env and update with your actual values
# NEVER commit .env to version control!

# ============================================================================
# Application Settings
# ============================================================================
NODE_ENV=development
PORT=3008
APP_NAME=AgriCredit
APP_VERSION=1.0.0

# Service URLs
SERVICE_URL=http://localhost:3008
FRONTEND_URL=http://localhost:3000

# ============================================================================
# Database Configuration (PostgreSQL)
# ============================================================================
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://agrilogistic:AgriLogistic_secure_2026@localhost:5432/agricredit

# Connection Pool Settings
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_TIMEOUT=30000

# ============================================================================
# Redis Configuration (Caching & Sessions)
# ============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TTL=3600

# Cache Settings
SCORE_CACHE_TTL=2592000  # 30 days in seconds
CACHE_ENABLED=true

# ============================================================================
# ML Model Configuration
# ============================================================================
ML_MODEL_VERSION=v1.0.0
ML_MODEL_PATH=./ml/models
ML_FALLBACK_ENABLED=true
ML_CONFIDENCE_THRESHOLD=0.7

# Python Interpreter
PYTHON_PATH=/usr/bin/python3

# Model Retraining
AUTO_RETRAIN_ENABLED=false
RETRAIN_INTERVAL_DAYS=30
MIN_TRAINING_SAMPLES=1000

# ============================================================================
# Security & Authentication
# ============================================================================
# JWT Secret (Generate with: openssl rand -base64 32)
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRATION=24h
JWT_REFRESH_EXPIRATION=7d

# API Keys
API_KEY_HEADER=X-API-Key
API_KEY=your-api-key-here

# Encryption
ENCRYPTION_KEY=your-encryption-key-32-chars-long
SALT_ROUNDS=10

# ============================================================================
# Rate Limiting
# ============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW=60000  # 1 minute in ms
RATE_LIMIT_MAX=100       # Max requests per window
RATE_LIMIT_SKIP_SUCCESSFUL=false

# ============================================================================
# CORS Configuration
# ============================================================================
CORS_ORIGIN=http://localhost:3000,http://localhost:3001
CORS_CREDENTIALS=true
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=Content-Type,Authorization,X-API-Key

# ============================================================================
# Logging Configuration
# ============================================================================
LOG_LEVEL=info  # debug, info, warn, error
LOG_FORMAT=json  # json or pretty
LOG_FILE=./logs/agricredit.log
LOG_MAX_FILES=30
LOG_MAX_SIZE=10m

# Sentry (Error Tracking)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# ============================================================================
# Monitoring & Metrics
# ============================================================================
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Health Check
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health

# ============================================================================
# External Services
# ============================================================================

# SMS Service (Twilio)
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# Email Service (SendGrid)
SENDGRID_API_KEY=
SENDGRID_FROM_EMAIL=noreply@agrilogistic.com
SENDGRID_FROM_NAME=AgriCredit

# Payment Gateway (Stripe)
STRIPE_SECRET_KEY=
STRIPE_PUBLISHABLE_KEY=
STRIPE_WEBHOOK_SECRET=

# ============================================================================
# Blockchain Configuration (for Agri-Coop module)
# ============================================================================
BLOCKCHAIN_ENABLED=false
BLOCKCHAIN_NETWORK=testnet  # mainnet, testnet, devnet
BLOCKCHAIN_RPC_URL=https://api.devnet.solana.com
BLOCKCHAIN_PRIVATE_KEY=

# Smart Contract Addresses
ESCROW_CONTRACT_ADDRESS=
COOP_CONTRACT_ADDRESS=

# ============================================================================
# IoT Configuration (for Cold Chain module)
# ============================================================================
IOT_ENABLED=false

# MQTT Broker
MQTT_BROKER_URL=mqtt://localhost:1883
MQTT_USERNAME=
MQTT_PASSWORD=
MQTT_CLIENT_ID=agricredit-iot

# InfluxDB (Time-series data)
INFLUXDB_URL=http://localhost:8086
INFLUXDB_TOKEN=
INFLUXDB_ORG=agrilogistic
INFLUXDB_BUCKET=cold-chain

# ============================================================================
# Weather Service Configuration
# ============================================================================
WEATHER_ENABLED=false
WEATHER_API_KEY=
WEATHER_API_URL=https://api.openweathermap.org/data/2.5
WEATHER_CACHE_TTL=3600  # 1 hour

# ============================================================================
# Vision AI Configuration
# ============================================================================
VISION_AI_ENABLED=false
VISION_MODEL_PATH=./ml/models/vision
VISION_CONFIDENCE_THRESHOLD=0.8

# Image Storage (AWS S3 or MinIO)
S3_ENABLED=false
S3_ENDPOINT=http://localhost:9000
S3_ACCESS_KEY=
S3_SECRET_KEY=
S3_BUCKET=agricredit-images
S3_REGION=us-east-1

# ============================================================================
# Feature Flags
# ============================================================================
FEATURE_BATCH_SCORING=true
FEATURE_AUTO_RECALCULATE=true
FEATURE_LOAN_RECOMMENDATIONS=true
FEATURE_CREDIT_HISTORY=true
FEATURE_ANALYTICS=true

# ============================================================================
# Business Rules
# ============================================================================

# Credit Score Thresholds
SCORE_LOW_RISK_MIN=750
SCORE_MEDIUM_RISK_MIN=600
SCORE_HIGH_RISK_MIN=400

# Loan Limits (in CFA)
LOAN_MAX_LOW_RISK=5000000
LOAN_MAX_MEDIUM_RISK=2000000
LOAN_MAX_HIGH_RISK=500000
LOAN_MAX_VERY_HIGH_RISK=100000

# Interest Rates (annual %)
INTEREST_RATE_LOW_RISK=8.0
INTEREST_RATE_MEDIUM_RISK=12.0
INTEREST_RATE_HIGH_RISK=18.0
INTEREST_RATE_VERY_HIGH_RISK=24.0

# Loan Duration (months)
LOAN_DURATION_LOW_RISK=24
LOAN_DURATION_MEDIUM_RISK=18
LOAN_DURATION_HIGH_RISK=12
LOAN_DURATION_VERY_HIGH_RISK=6

# ============================================================================
# Testing Configuration
# ============================================================================
TEST_DATABASE_URL=postgresql://test:test@localhost:5432/agricredit_test
TEST_REDIS_HOST=localhost
TEST_REDIS_PORT=6380

# ============================================================================
# Development Tools
# ============================================================================
DEBUG=false
SWAGGER_ENABLED=true
PLAYGROUND_ENABLED=true

# Hot Reload
WATCH_MODE=true
WATCH_EXTENSIONS=.ts,.js

# ============================================================================
# Production Optimizations
# ============================================================================
COMPRESSION_ENABLED=true
HELMET_ENABLED=true
TRUST_PROXY=false

# Cluster Mode
CLUSTER_ENABLED=false
CLUSTER_WORKERS=4

# ============================================================================
# Backup & Recovery
# ============================================================================
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=./backups

# ============================================================================
# Compliance & Audit
# ============================================================================
AUDIT_ENABLED=true
AUDIT_LOG_PATH=./logs/audit.log
GDPR_ENABLED=true
DATA_RETENTION_DAYS=365

# ============================================================================
# Notes
# ============================================================================
# 1. Generate secure secrets: openssl rand -base64 32
# 2. Use strong passwords for production
# 3. Enable HTTPS in production
# 4. Configure firewall rules
# 5. Set up monitoring and alerts
# 6. Regular security audits
# 7. Backup database regularly
# 8. Keep dependencies updated
