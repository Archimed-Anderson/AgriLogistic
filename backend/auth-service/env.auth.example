# =========================
# AgroLogistic Auth Service
# =========================

# Environment
ENV=development
LOG_LEVEL=info

# PostgreSQL (docker-compose.auth.yml)
AUTH_PG_DATABASE=agrologistic_auth
AUTH_PG_USER=auth
AUTH_PG_PASSWORD=change_me_strong

# Compose-friendly DATABASE_URL (points to auth-postgres container)
DATABASE_URL=postgresql+asyncpg://auth:change_me_strong@auth-postgres:5432/agrologistic_auth

# Redis (docker-compose.auth.yml)
REDIS_URL=redis://auth-redis:6379/0

# OIDC / JWT
# Use the public URL clients see (often Kong proxy URL in dev).
OIDC_ISSUER=http://localhost:8000
JWT_ALGORITHM=RS256
JWT_KID=web-app-jwt-key
JWT_PRIVATE_KEY_PATH=/keys/jwt-private.pem
JWT_PUBLIC_KEY_PATH=/keys/jwt-public.pem
ACCESS_TOKEN_EXPIRE_SECONDS=900
REFRESH_TOKEN_EXPIRE_SECONDS=604800

# OAuth2 / OIDC session secret (used for social login state)
OAUTH_SESSION_SECRET=change_me_very_long

# First-party OAuth client (used by /api/v1/auth/login refresh token issuance)
FIRST_PARTY_CLIENT_ID=agrologistic-web-app
FIRST_PARTY_CLIENT_SECRET=change_me_strong_secret
FIRST_PARTY_CLIENT_NAME=AgroLogistic Web App
FIRST_PARTY_REDIRECT_URIS=http://localhost:3000/api/auth/callback

# Social login (optional)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# Security
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION_MINUTES=30
LOGIN_RATE_LIMIT_MAX=5
LOGIN_RATE_LIMIT_WINDOW_SECONDS=900

